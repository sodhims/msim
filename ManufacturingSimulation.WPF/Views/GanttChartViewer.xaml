<UserControl x:Class="ManufacturingSimulation.WPF.Views.GanttChartViewer"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="1000"
             Background="White">

    <UserControl.Resources>
        <!-- Color brushes for different task states -->
        <SolidColorBrush x:Key="ScheduledBrush" Color="#4A90E2"/>
        <SolidColorBrush x:Key="InProgressBrush" Color="#F5A623"/>
        <SolidColorBrush x:Key="CompletedBrush" Color="#7ED321"/>
        <SolidColorBrush x:Key="DelayedBrush" Color="#D0021B"/>
        <SolidColorBrush x:Key="BlockedBrush" Color="#9013FE"/>

        <!-- Grid line brush -->
        <SolidColorBrush x:Key="GridLineBrush" Color="#E0E0E0"/>

        <!-- Header background -->
        <SolidColorBrush x:Key="HeaderBrush" Color="#F5F5F5"/>

        <!-- Style for task bars -->
        <Style x:Key="TaskBarStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="3"/>
            <Setter Property="Margin" Value="1"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#333333"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <!-- Style for timeline labels -->
        <Style x:Key="TimelineLabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="Foreground" Value="#666666"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>

        <!-- Style for resource labels -->
        <Style x:Key="ResourceLabelStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#333333"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Padding" Value="5,0"/>
        </Style>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Toolbar -->
        <Border Grid.Row="0" Background="{StaticResource HeaderBrush}" 
                BorderBrush="{StaticResource GridLineBrush}" BorderThickness="0,0,0,1" 
                Padding="10,5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="Gantt Chart View" FontSize="16" FontWeight="Bold" 
                              VerticalAlignment="Center" Margin="0,0,20,0"/>

                    <!-- Legend -->
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Legend:" FontSize="11" Margin="0,0,10,0" 
                                  VerticalAlignment="Center"/>

                        <Border Background="{StaticResource ScheduledBrush}" 
                               Width="15" Height="15" CornerRadius="2" Margin="0,0,3,0"/>
                        <TextBlock Text="Scheduled" FontSize="10" Margin="0,0,10,0" 
                                  VerticalAlignment="Center"/>

                        <Border Background="{StaticResource InProgressBrush}" 
                               Width="15" Height="15" CornerRadius="2" Margin="0,0,3,0"/>
                        <TextBlock Text="In Progress" FontSize="10" Margin="0,0,10,0" 
                                  VerticalAlignment="Center"/>

                        <Border Background="{StaticResource CompletedBrush}" 
                               Width="15" Height="15" CornerRadius="2" Margin="0,0,3,0"/>
                        <TextBlock Text="Completed" FontSize="10" Margin="0,0,10,0" 
                                  VerticalAlignment="Center"/>

                        <Border Background="{StaticResource DelayedBrush}" 
                               Width="15" Height="15" CornerRadius="2" Margin="0,0,3,0"/>
                        <TextBlock Text="Delayed" FontSize="10" Margin="0,0,10,0" 
                                  VerticalAlignment="Center"/>

                        <Border Background="{StaticResource BlockedBrush}" 
                               Width="15" Height="15" CornerRadius="2" Margin="0,0,3,0"/>
                        <TextBlock Text="Blocked" FontSize="10" 
                                  VerticalAlignment="Center"/>
                    </StackPanel>
                </StackPanel>

                <!-- Controls -->
                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button x:Name="btnZoomIn" Content="Zoom In" Padding="10,3" 
                           Margin="0,0,5,0" Click="BtnZoomIn_Click"/>
                    <Button x:Name="btnZoomOut" Content="Zoom Out" Padding="10,3" 
                           Margin="0,0,5,0" Click="BtnZoomOut_Click"/>
                    <Button x:Name="btnResetZoom" Content="Reset Zoom" Padding="10,3" 
                           Margin="0,0,5,0" Click="BtnResetZoom_Click"/>
                    <Button x:Name="btnExport" Content="Export" Padding="10,3" 
                           Click="BtnExport_Click"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Timeline Header -->
        <Border Grid.Row="1" Background="{StaticResource HeaderBrush}" 
                BorderBrush="{StaticResource GridLineBrush}" BorderThickness="0,0,0,1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Resource header -->
                <Border Grid.Column="0" Background="{StaticResource HeaderBrush}" 
                       BorderBrush="{StaticResource GridLineBrush}" BorderThickness="0,0,1,0">
                    <TextBlock Text="Resources / Tasks" 
                              Style="{StaticResource ResourceLabelStyle}"
                              Margin="10,5"/>
                </Border>

                <!-- Timeline header -->
                <ScrollViewer Grid.Column="1" 
                             HorizontalScrollBarVisibility="Hidden" 
                             VerticalScrollBarVisibility="Disabled"
                             x:Name="timelineScrollViewer">
                    <Canvas x:Name="timelineCanvas" 
                           Height="40" 
                           Background="{StaticResource HeaderBrush}"/>
                </ScrollViewer>
            </Grid>
        </Border>

        <!-- Main Gantt Chart Area -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Resource List -->
            <ScrollViewer Grid.Column="0" 
                         VerticalScrollBarVisibility="Hidden"
                         HorizontalScrollBarVisibility="Disabled"
                         x:Name="resourceScrollViewer">
                <StackPanel x:Name="resourceListPanel" Background="White">
                    <!-- Resources will be added dynamically -->
                </StackPanel>
            </ScrollViewer>

            <!-- Chart Area with Grid -->
            <ScrollViewer Grid.Column="1" 
                         HorizontalScrollBarVisibility="Auto" 
                         VerticalScrollBarVisibility="Auto"
                         x:Name="chartScrollViewer"
                         ScrollChanged="ChartScrollViewer_ScrollChanged">
                <Grid>
                    <!-- Grid lines canvas (background) -->
                    <Canvas x:Name="gridLinesCanvas" 
                           Background="White"/>

                    <!-- Tasks canvas (foreground) -->
                    <Canvas x:Name="tasksCanvas"/>
                </Grid>
            </ScrollViewer>
        </Grid>

        <!-- Status Bar -->
        <Border Grid.Row="3" Background="{StaticResource HeaderBrush}" 
                BorderBrush="{StaticResource GridLineBrush}" BorderThickness="0,1,0,0" 
                Padding="10,3">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock x:Name="txtStatus" Text="Ready" FontSize="10" 
                              Foreground="#666666" VerticalAlignment="Center"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <TextBlock x:Name="txtZoomLevel" Text="Zoom: 100%" FontSize="10" 
                              Foreground="#666666" VerticalAlignment="Center" Margin="0,0,15,0"/>
                    <TextBlock x:Name="txtTimeRange" Text="Time Range: N/A" FontSize="10" 
                              Foreground="#666666" VerticalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>
